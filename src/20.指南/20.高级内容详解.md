---
title: 高级内容详解
permalink: /pages/advanced-settings/

---
以下内容将为您介绍软件高级设置部分

# 软件高级设置

## 工作状态恢复

<div align=center>
<img src="/Statics/UserGuide/50.png"  width=600>
</div>

### 自动寻找进度

::: tip
- 当遇到任务中途断电或者其他以外情况终止任务导致程序退出的情况，可以通过点击**自动寻找进度**来恢复上次的区块位置。
- 也可以直接将项目文件夹拖入软件中，软件将自动寻找该项目文件夹对应的进度。
:::

点击此按钮前请您先点击要恢复进度的任务条目。随后点击“**一键补帧**”，软件将弹窗向您确认补帧起始位置。

<div align=center>
<img src="/Statics/UserGuide/51.png"  width=600>
</div>

### 起始补帧时刻和结束补帧时刻

可以选择需要补帧的时间段

<div align=center>
<img src="/Statics/UserGuide/52.png"  width=600>
</div>

>输入格式: **小时:分钟:秒**

::: warning
指定起始补帧时刻和结束补帧时刻后，手动终止或断电后可能会导致进度恢复失败
:::

### 起始区块计数和起始输入帧数

自动寻找进度失败或需手动指定补帧起始位置时用，可用于手动恢复补帧进度

- 起始区块计数 = 输出文件夹中导出的**最后一个chunk数 + 1**（例如图中的chunk-001，应将起始区块计数为**1+1=2**）
- 起始输入帧数 = 输出质量设置（渲染设置）中`单一输出区块大小 * (起始区块计数 - 1)`

<div align=center>
<img src="/Statics/UserGuide/8.png"  width=600>
</div>

<div align=center>
<img src="/Statics/UserGuide/53.png"  width=600>
</div>

<div align=center>
<img src="/Statics/UserGuide/54.png"  width=600>
</div>

如上图，一个视频chunk有1000帧

### 复原至原点

将起始区块和起始输入帧数归为系统默认值，**软件将自动搜索复原点并恢复任务进度**

<div align=center>
<img src="/Statics/UserGuide/61.gif"  width=600>
</div>

### 风险模式

需要恢复任务进度时，开启此项可以**减少程序恢复进度所需的时间**，但开启可能会造成**音画不同步**。

**不推荐开启**。

<div align=center>
<img src="/Statics/UserGuide/50.png"  width=600>
</div>

## 转场识别

<div align=center>
<img src="/Statics/UserGuide/67.png"  width=600>
</div>

### 开启转场识别

识别场景切换

为了在补帧过程避免场景切换时产生**果冻效应**，建议您开启转场识别。

在勾选了开启转场识别之后，下方的参数值一般选择12；如果您发现最终导出的视频比较卡顿，可以考虑调节至15；
如果发现**果冻效应**较多，可以考虑将参数值调到9，参数值的范围一般为9-15。

**如图：转场漏判产生果冻**

<div align=center>
<img src="/Statics/UserGuide/14.gif"  width=600>
</div>

::: warning
由于该转场识别机制基于**长视频输入**设计，因此对于一些短视频输入（2-3s），建议关闭该转场识别功能或手动使用第三方软件生成转场数据实现手动转场处理，避免自动识别性能较差导致卡顿。
:::

### 最大识别阈值 (默认不用调整)

当没有开启 **使用固定转场识别** 时（默认情况），该选项建议值为80-90。

当开启 **使用固定转场识别** 时，该选项建议值为40-60。

### 使用固定转场识别

使用固定的阈值(最大识别阈值)来识别转场(不稳定)，此时软件将对视频每两帧进行一次相似度检测，

如果相似度大于该阈值，则认为是转场帧。该模式很容易导致误判或漏判，仅建议在默认转场检测方法漏判较多时使用，如镜头非常多的混剪。

### 转场使用帧混合

传统方法是复制前一帧作为转场帧。该方法是混合前后两帧(渐变)以减少复制转场帧导致的卡顿。

### 转场外插

传统方法是复制前一帧作为转场帧。该方法是使用转场帧的前两帧，使用补帧算法进行外插，以减少复制转场帧导致的卡顿。

::: warning
不建议使用RIFE算法时开启此选项，否则会引入果冻。
:::

### 输出转场帧

输出视频中的转场帧。
转场帧将附带相关判决信息，以png格式输出在项目文件夹的scene文件夹中。

## 手动选择转场支持

Json路径选项填写 Transition Chooser 导出视频`转场列表文件`的路径，见[使用教程](https://youtu.be/opig4Ur_mxM?si=P85QMhrOn09r44Hb)。

该方法能够导入使用TC软件手动标记的转场替换自动识别的转场，来手动实现对输入视频何处补帧何处不补的完全控制。

<div align=center>
<img src="/Statics/UserGuide/55.png"  width=600>
</div>

## 输出分辨率设置

<div align=center>
<img src="/Statics/UserGuide/56.png"  width=600>
</div>

### 输出文件分辨率

下拉框用于分辨率预设选择。
在预设为Custom（自定义）时，您能够设置视频最终的输出分辨率。SVFI会先对画面的分辨率进行调整，之后再进行补帧。

### 裁剪黑边

可用于裁剪视频中的黑边，需要手动指定宽高。

> 例：视频<Badge text="注"/>分辨率3840x2160, 实际画面分辨率3840x1620, 则在此处的**高**填`270 = (原片高-实际高)÷2`。

<Badge text="注"  vertical="middle"/>: 若使用AI超分, 则这里的视频指最终的输出视频

> 例：输入视频1920x1080，实际分辨率1920x800，超分2倍输出3840x1600。则黑边高填280, 输出分辨率可自定义为3840x1600

:::tip
若宽和高都输入-1，SVFI将自动识别输入视频的黑边并裁剪
:::

### 处理后补全黑边

切除黑边后进行处理（补帧或超分），补完帧后再把黑边自动加回来。
:::tip
一定程度上可减少单帧计算量，加快处理速度。
:::

## 使用AI超分（使视频画面更清晰）

::: tip
此功能需购买[专业版DLC](https://store.steampowered.com/app/1718750/SVFI_Professional/)
:::

::: warning
同时进行补帧超分会消耗更多显存，显存不足可能会导致任务失败。

若显存少于10G，建议先使用一键压制完成超分，再进行补帧。
:::

### 先进行补帧后超分

先执行补帧操作, 之后进行超分(这通常会降低速度, 但会减小显存占用且往往能获得更好的效果)

### 负载显卡

指定使用哪一张显卡进行超分

## 超分算法

目前SVFI支持以下超分算法。

| 算法名称 | 适用素材 | 需要BETA | A卡可用|
| :---: | :---: | :---: | :---: |
| Anime4K | 动漫 |  | √ |
| AnimeSR | 动漫 |  | × |
| realCUGAN | 动漫 | | × |
| ncnnCugan | 动漫 |  | √ | 
| waifuCuda | 动漫 |  | × |
|PureBasicVSR | 实拍 |  | × |
| BasicVSR++ T3 | 实拍 | √ | × |
| ATD | 实拍 | √ | × |
| realESR | 通用 |  | × |
| ncnnRealESR | 通用 |  | √ |
| waifu2x | 通用 |  | √ |
| TensorRT(ONNX) | 通用 |  | × |
| Compact | 通用 | √ | × |
| SPAN | 通用 | √ | × |

:::tip
SVFI对动漫素材和实拍素材的定义区分如下：

**动漫**素材是主要由平面影像图层构成的运动视频片段，**每一图层与另一图层的交界清晰**。如，手绘2D动画，大多数三渲二画面等。

**实拍**素材是使用单视点摄影机拍摄的真实世界画面或计算机生成图画，**肉眼无法分辨出各个图层与其交界**。如，真人电影，3D CG，3D游戏画面等。

特别地，我们认为3D/3G背景+2D人物制作的动画为动漫素材类别。
:::

<div align=center>
<img src="/Statics/UserGuide/57.png"  width=600>
</div>

## 对超分模型的介绍

### **realCUGAN**

**动漫专用 效果十分优秀**

- up2x代表2倍放大，3x,4x类似

- pro模型为增强版，详见[官方介绍](https://github.com/bilibili/ailab/tree/main/Real-CUGAN)

- 带conservative字样的模型是保守类模型

- 带no-denoise的模型表现不进行降噪

- 带denoise的模型表现进行降噪,后面的数字代表降噪强度

### **ncnnCUGAN**

CUGAN的NCNN版本(A卡，N卡，I卡通用)，介绍同上

### **waifuCuda**

用于动漫超分，速度与效果和cugan有些许相似、

### **realESR**

**3D动漫均可用，更适合动漫**

- RealESRGAN模型倾向于脑补,画面更加清晰,艳丽

- RealESRNet模型倾向于涂抹,但画面保持原色彩

- 带anime标注的模型为动漫超分专用，速度较前两者略快

- anime为官方模型，anime_110k为自训练模型

- RealESR_RFDN 为自训练超分模型,速度快,适合于动漫输入

### **ncnnRealESR**

realESR的NCNN版本，A卡，I卡，N卡通用

- realesr-animevideov3 (比较保守的动漫视频超分模型，速度较快，质量较高)

- realesrgan-4xplus (4倍放大模型)

- realesrgan-4xplus-anime (4倍动漫放大模型)

### **AnimeSR** (由Tencent ARC Lab开发的动漫超分算法)

仅一个四倍放大模型(AnimeSR_v2_x4.pth), 效果相比cugan更保守

### **BasicVSRPlusPlusRestore** (实拍超分算法,效果依赖超分序列长度)

::: tip
该算法仅在公测Beta版本中可用
:::

::: warning
此系列算法消耗显存较多，建议使用6G以上的显卡
:::

- basicvsrpp_ntire_t3_decompress_max_4x 四倍放大去压缩模型t3（推荐使用）

- basicvsrpp_ntire_t3_decompress_max_4x_trt 四倍放大去压缩模型t3 (TensorRT加速)（较难编译，不建议使用）

### **Anime4K** (超高速实时动漫超分算法, 较保守)

我们为用户准备了6种预设脚本

- Anime4K_Upscale_x2 A/B/C/D 均为2倍放大（默认选A）

- Anime4K_Upscale_x3 为3倍放大，x4模型类似

### **waifu2x** (经典保守超分算法)

- cunet模型用于动漫超分

- photo模型用于实拍

- anime用于动漫超分

### **Compact**

::: tip
该算法仅在专业版DLC的公测Beta版本中可用，需要手动前往Steam设置-测试版中选择
:::

一种超分模型结构，一些模型如**AnimeJanai**基于该结构训练

#### AnimeJanai

**3D动漫均可用，更适合动漫**

- RealCUGAN的弱化版本，对景深识别差（容易锐化背景），计算量少速度快
- 速度：UltraSuper > Super > Compact 模型


### **SPAN**

::: tip
该算法仅在专业版DLC的公测Beta版本中可用，需要手动前往Steam设置-测试版中选择
:::
一种超分模型结构，一些模型系列如**Nomos**基于该结构训练


### **TensorRT** (对以上部分超分算法的N卡专用超快加速)

- 具有cugan的全部模型加速

- real-animevideov3 为RealESR中专门为动漫视频超分准备的模型

- RealESRGANv2-animevideo-xsx2 两倍动漫视频超分放大模型

- RealESRGANv2-animevideo-xsx4 四倍动漫视频超分放大模型


::: warning
由于使用TRT处理需要进行预编译，因此初次使用TRT编码时，不要开启大于1的线程数。

如果初次使用报错，请尝试五到六次。

若仍然报错，请联系开发人员。
:::

## 超分模型视觉对比

<imgSlider :items="[
{
	first: '/Statics/UserGuide/SrCompare/aniscale_in.png',
    second: '/Statics/UserGuide/SrCompare/aniscale_out.png',
	name: 'Aniscale',
    desc: '使用2x-AniScale-Compact模型'
},
{
	first: '/Statics/UserGuide/SrCompare/aniscale_1_in.png',
    second: '/Statics/UserGuide/SrCompare/aniscale_1_out.png',
	name: 'Aniscale2',
    desc: '使用2x-AniScale-Compact模型'
}
]"/>
<imgSlider :items="[
{
	first: '/Statics/UserGuide/SrCompare/t3_in.png',
    second: '/Statics/UserGuide/SrCompare/t3_out.png',
	name: 'T3',
    desc: '使用BasicVSR++ T3模型'
}
]"/>


## 自行添加OpenModelDB上的超分模型

[OpenModelDB](https://openmodeldb.info/)支持的模型结构如下图
<div align=center>
<img src="/Statics/UserGuide/openmodeldb_1.png"  width=600>
</div>
其中与SVFI兼容的有Compact，SPAN，ATD，ONNX（TensorRT）.

### 示例：新增Compact或Compact模型

- 搜索Aniscale，可以看到待测模型AniScale-2-Compact
<div align=center>
<img src="/Statics/UserGuide/openmodeldb_2.png"  width=600>
</div>

- 点击进入第一代Aniscale
- 关注右侧的模型信息Size，`64nf`代表特征数量（“模型通道数”），`16nc`代表卷积数量（“模型深度”）
<div align=center>
<img src="/Statics/UserGuide/openmodeldb_3.png"  width=600>
</div>

- SVFI载入Compact模型的策略如下：
    - 模型名带`super ultra`（来自animejanai），`nf=24，nc=8`；
    - 模型名带`ultra`（来自animejanai），`nf=64，nc=8`；
    - 默认`nf=64，nc=16`.
- 回头点击Aniscale-2-Compact，发现网页没有模型信息说明，那么认为它使用默认的模型结构配置，`nf=64，nc=16`，
- 直接下载pth模型到`SVFI\models\sr\Compact\models`即可使用，若没有该文件夹，请手动新建

- 导入SPAN模型同理
<div align=center>
<img src="/Statics/UserGuide/openmodeldb_4.png"  width=600>
</div>

SVFI目前只能载入`nf=48`的模型，其他模型暂时不支持。其他魔改模型也不支持

### 示例：新增TensorRT模型

你也可以添加其他支持的超分模型如[AnimeJanai](https://github.com/the-database/mpv-upscale-2x_animejanai)

SVFI支持的超分模型onnx要求满足以下条件：

- 只有一个输入，维度为`[dynamic, 3, dynamic, dynamic]`
- 只有一个输出，维度为`[dynamic, 3, dynamic, dynamic]`
- 输入节点名为`input`，输出节点名为`output`

放在`SVFI\models\sr\TensorRT\models`

::: tip 模型编译说明
- 模型编译完成后会生成`.engine`文件，如`realesrgan_2x.onnx.540x960_workspace128_fp16_io32_device0_8601.engine`说明模型输入大小（切割大小）是540x960，
- 不同切割大小会导致完全不同的超分速度，因此要谨慎选择切割块大小，尽量不要开启切割块
:::

### 其他模型规则

- esrgan默认状态下只支持`nf=64，nb=23`的模型，
- 当模型名称包含`anime`时，`nb`会被识别为6；

::: tip 术语说明
- nf => number of features, 
- nc => number of convs, 
- nb => number of blocks
:::

## 对一些放置在超分栏目的特殊模型的介绍

### **InPaint** 去水印模型

::: tip
该算法仅在专业版DLC的公测Beta版本中可用，需要手动前往Steam设置-测试版中选择
:::

- inpaint_sttn_1x: 目前该模型仅支持一倍修复，无超分功能，需配合蒙版功能使用：

开启流程如下：

1. 开启超分功能并选择正确的模型
<div align=center>
<img src="/Statics/UserGuide/inpaint_1.png"  width=600>
</div>

2. 开启播放器功能
<div align=center>
<img src="/Statics/UserGuide/inpaint_2.png"  width=600>
</div>

3. 开启蒙版功能
<div align=center>
<img src="/Statics/UserGuide/inpaint_3.png"  width=600>
</div>

4. 绘制蒙版并保存

<div align=center>
<img src="/Statics/UserGuide/inpaint_4.png"  width=600>
</div>

该模型会自动识别每块蒙版区域内的静态水印并去除。请务必保证蒙版区域内留有足够的**动态变化内容**，否则无法自动识别。

::: warning
该模型对于**纯色背景/静态内容**上的水印识别及去除性能较差。
:::

5. 点击一键压制开始去水印


## 其他超分选项介绍

### 超分模型倍数

当前选择的模型的超分倍数

### 转移分辨率比

即预缩放功能：先按用户设置的百分比缩放原视频，之后再进行超分

>例:原视频：**1920x1080**，转移分辨率比：**50%**， 模型放大倍数：**4x**
>
>此时软件的运行过程为: `1920x1080`(输入) -> `960x540`(下缩放50%) ->`3840x2160`(超分辨率)

::: tip
- 若转移分辨率设置为**AUTO**，那么转移分辨率会被固定为`100%`
- 对于恢复模型，转移分辨率会被强制设置为100%。
:::

::: warning
- SVFI对每帧只会进行一次超分或恢复处理，意味着当用户设定输出分辨率为`400%`但使用2x模型超分时，SVFI只会将原视频使用超分模型超分一次到200%，再用bicubic拉伸到400%
- 因此，使用100%的转移分辨率，用2x模型做400%超分，和用4x模型做200%超分的效果，是不一样的
::: 

### RealCUGAN切割模式

realCUGAN专用，切的越多越节省显存

- No Tile:不使用切割

- 1/2 on Width: 横向一分为二

- 1/2 on both W and H: 横纵各一分为二

- 1/3 on w & h: 横纵各切三份

- 1/4 on w & h: 横纵各切四份

### RealCUGAN低显存模式

realCUGAN专用，显卡显存不足时使用

- None: 不使用低显存模式

- Low VRAM Mode: 启用低显存模式

### 切割块大小(使用realCUGAN时不建议开启)

<div align=center>
<img src="/Statics/UserGuide/58.png"  width=600>
</div>

- 有为显存大小制定的预设，也可以选择自定义调节

::: tip 遇到显存不足问题的建议操作
- 对于6G以下的显存的显卡，若显存不足直接启用切割块，其他选项保持默认
- 6G以上，尝试不开切割块，开切割模式，如果开到最大（1/4）还是爆显存，关闭此设置关掉并直接开启切割块，依次尝试切割块从大（512）到小的选项
- 4G或以下显存，请启用低显存模式并直接启用切割块
:::

### 超分强度

仅用于RealCUGAN超分模型系列

对于非TensorRT模型：数值越小越清晰锐利, 数值越大越保守稳定 （推荐数值区间0.5-1.2）

对于TensorRT模型，相反：数值越小越模糊，画面越模糊，上限值为1

### 超分线程

当拥有多张显卡或发现显卡占用吃不满时可以尝试增加此值（一次增加1）

### 超分序列长度

仅当选择BasicVSR系列、InPaint等需要多帧输入的算法时有效

- 超分序列长度越大，单次超分输入的帧就越多，纹理越稳定，但同时会增大显存占用,
- 建议该值保持10以上，如果显存不足建议降低画面分辨率并保证该值在5以上
- 对于去水印（InPaint）模型，此值普遍建议在30及以上以获得较好的去水印效果

### 超分使用半精度

- 推荐开启，可大幅度减小显存占用，对画面质量影响较小。

::: danger
使用NVIDIA 10xx系列Pascal架构的显卡时开启该选项，会减慢超分速度，并可能导致输出黑屏。建议关闭该选项。
:::

### TTA

仅ncnnCUGAN支持，以大量时间消耗换取画质的小幅度提升

### 使用AI增强算法

::: tip
该功能仅在公测Beta版本中可用
:::

**FMNet - SDR2HDR10:** 使用AI算法将SDR视频转换为HDR10
**DeepDeband:** 使用AI算法去除色带(这可能会导致画面颜色变粉)

## 输出设置（压制参数质量）

<div align=center>
<img src="/Statics/UserGuide/59.png"  width=600>
</div>

### 渲染质量CRF

用于调整视频导出时的质量亏损， 与**输出码率呈正相关**。

使用不同压制编码和压制预设均会对CRF产生影响。

**CRF数值参数一般为16**，此时肉眼无损；

对于H.265编码，码率会有明显下降。**请以肉眼所见画面质量来评定CRF数值大小是否合理。**

如果是作为**收藏CRF数值参数可设为12**。

**CRF的数值越小，操作过程之后对画面损失就越小，同时导出的成品视频体积（码率）越大。**

**注意：相同数值，不同编码器的输出质量不同**

::: tip
调整输出视频码率时，如果对CRF不太了解，请使用默认参数16或者通过百度学习相关知识。
:::

### 目标码率

作为替代渲染质量CRF的可选项，和Primier Pro，After Effects，DaVinci Resolve的设置标准基本相同

### 编码器

- **AUTO**
    根据软件下方的滑动条自动决定编码器选项
- **CPU**
    选择此项压制，**质量最高，但CPU占用率也最高**。**CPU的性能优劣**决定补帧或超分过程中是否会阻塞（导致显卡占用下降），以及最后操作完成的**时间长短**。
- **NVENC**
    此项仅供**支持NVENC功能的NVIDIA显卡**选用，如果您的显卡并**不支持NVENC功能请不要选择此项**。
    请自行查阅安装目录下的NVIDIA NVENC Gen.pdf查阅自己的显卡是否支持NVENC
- **VCE**
    此项仅**供支持VCE功能的AMD显卡**选用，如果您的显卡并**不支持VCE功能请不要选择此项**。
- **QSV**
    此项仅支持有**Intel核显**的用户选用(例如Intel UHD 630、IrisPro 580)，非此类用户不要选用。

  ::: tip
  以下编码器需购买[专业版DLC](https://store.steampowered.com/app/1718750/SVFI_Professional/)
  :::

- **NVENCC**为**NVENC**的优化版本，处理速度更快，作品质量更好。
- **QSVENCC**为**QSV**的优化版本，完成任务的效率更高。
- **VCENCC**为**VCE**的优化版本，完成任务的效率更高。

::: tip 手动指定硬件编码器使用的GPU
在高级设置的自定义压制命令行选项中，
- 使用encc编码器，填写`-d||<gpu>`来控制使用的编码GPU，如`-d||0`
- 使用ffmpeg nvenc填写`-gpu||<gpu>`来控制使用的编码GPU
- 使用ffmpeg vce，qsv填写`-init_hw_device||qsv=intel,child_device=<gpu>`来控制使用的编码GPU
:::

感性对比：

| 编码器 | 使用硬件  | 速度 | 质量 | 文件大小 | 选择建议                                     |
| ------ | --------- | ---- | ---- | -------- | -------------------------------------------- |
| CPU    | CPU       | 中   | 高   | 中       | 追求画质和编码稳定性以及A卡用户AU用户选择    |
| NVENC  | N卡       | 快   | 中   | 大       | 追求速度和质量并重，对大小不太敏感的用户选择  |
| QSV    | Intel核显 | 快   | 中   | 大       | 追求速度和质量并重，对大小不太敏感的用户选择  |

### 选择压制编码

对于此项功能的选择，需要您具备一定的**视频压制常识**。

::: warning 如您不熟悉压制，请您谨记以下规则：

- HDR输出务必选择**H.265 10bit**编码
- 2K以上分辨率务必选择 **H.265** 编码（尤其是4K，8K分辨率）
- 如果H.264、H.265编码均出现问题，使用**ProRes**编码。此编码输出最贴近肉眼无损，码率极大，是用于剪辑工作的中间编码格式。
- 推荐使用H.265 fast编码或ProRes编码
- 当出现`Broken Pipe`错误时，请直接使用H265编码。请注意上述编码存在最高分辨率和帧率的限制，
- 因此请不要刻意同时追求过高的分辨率和帧率（如8K 120fps）
:::


::: tip
- CPU 编码即为软件编码，软编**普遍速度慢文件小、质量好**。
- NVENC 、QSV、VCE 为硬件编码，其中NVENC 使用nVidia显卡，QSV 使用intel 核显，VCE使用AMD显卡，硬件编码的特点，速度快、文件大，在低码率小文件的情况下，质量比CPU 差。
- 硬编优先选择NVENC，在N卡硬编预设（您可以鼠标悬浮看说明）这一项中，可以自行在[官网](https://developer.nvidia.com/video-encode-and-decode-gpu-support-matrix-new)查询自己显卡的硬编预设等级，20系和30系一般都为7th+。
- 硬编会对显卡有一定负载，如果选用NVENC 出现**Broken Pipe**错误，请**降低N卡硬编预设或者换用核显编码QSV**。
- 如果仍有同样错误，**使用CPU**。

:::

::: tip 其他的一般性建议
- 如果输出仅用于个人观赏用途，对压制质量要求较低，请尽量使用硬件编码(NVENC,VCE,QSV等)以避免CPU压制瓶颈。CPU瓶颈会导致显卡占用率下降，进而导致任务速度下降
:::

### 选择压制预设

- CPU: 英文含义**速度越快的作品质量越低，反之质量越高**。

- NVENC(N卡专用): 建议无脑选p7

- QSV(Intel显卡专用): 直接选slow

- VCE(A卡专用): 直接选quality

- NVENCC(N卡专用): 直接选quality

- QSVENCC(Intel显卡专用): 直接选best

- VCENCC(A卡专用): 直接选slow

### 使用零延迟解码编码

仅当选择压制编码处为H264或H265时有效
使用此功能可以减小视频解码压力, 适用于要求快速解码与低延迟需求的场景, 如:
- 向BiliBili与Youtube等平台上传视频作品时 (防止卡转码)
- VR头显播放超清超高帧率内容时
- 播放器解码花屏

::: warning
输入为HDR时此功能不生效
:::

### N卡硬编预设

选择NVENC编码器时, N卡硬编预设可在画面质量不变的情况下，缩小导出视频体积，需要查询自己的N卡是第几代NVENC压制芯片，超过7th直接选7th+

### 默认压制方案

使用传统的压制方案, 兼容性强, 导出视频体积可能会增大。

:::tip
启用此功能可以解决大多数broken pipe问题。
:::

### 二次压制音质

- 对音频进行重编码(一般在上传平台的视频上用)
- 将视频中的所有音频轨道压制为**640kbps的aac格式**。

### HDR严格模式

用严格预设处理HDR内容,默认开启即可

### 兼容 DV HDR10

在杜比视界输出时启用HDR10兼容,默认开启即可

### 一键HDR: 将SDR视频转换为HDR10+

四种一键HDR模式需要自行尝试效果

## 解码质量控制

### 使用vspipe前置解码

使用vspipe作为前置解码,此功能是许多特定功能(例如去色块,快速添噪,QTGMC去隔行)的前提条件,

如果您发现他无法解码输入或任务报错，请关闭它

### 全VSPipe工作流

::: tip
此功能需购买[专业版DLC](https://store.steampowered.com/app/1718750/SVFI_Professional/)
:::

全流程使用vspipe进行处理，减少不必要的计算。是当前SVFI相同设置下，能够达到最快速度的模式。

只支持TensorRT加速的超分和部分补帧模型。


### 硬件解码

可以减轻大分辨率视频解码压力，但可能会在一定程度上**降低画面质量**，并在显存紧张时导致补帧模块**爆显存**。

### 快速拆帧

快速拆帧操作可以**减轻解码压力**，但可能会**导致画面色彩出现偏差**。

### 高精度优化工作流

::: tip
此功能需购买[专业版DLC](https://store.steampowered.com/app/1718750/SVFI_Professional/)
:::

- 若CPU性能过剩，建议您开启此项功能，可**解决多数画面颜色偏差问题**，并可最大程度解决HDR视频压制产生的色偏问题。此功能会**加大CPU负担**，甚至影响补帧速度。
- 超分工作开启此功能将会**关闭半精度**(所需要的显存更大)。请您**酌情选择**。

:::tip
建议在输入HDR视频时开启此选项
:::

::: danger 未知bug警告
当前启用该功能可能导致自动转场识别功能失效，该问题仍在修复中。
:::

### 开启反交错

::: tip
此功能需购买[专业版DLC](https://store.steampowered.com/app/1718750/SVFI_Professional/)
:::

- 使用**ffmpeg**对输入的**隔行扫描视频**进行反交错处理。

- 当使用vspipe前置解码时,使用QTGMC反交错处理画面

### 快速降噪

::: tip
此功能需购买[专业版DLC](https://store.steampowered.com/app/1718750/SVFI_Professional/)
:::

此栏目下的“快速”选项如果不是特殊需要，请保持关闭，否则会**减缓任务处理速度**。

::: tip
推荐自行控制变量试验此选项是否对画面质量提升有帮助。

与高精度优化工作流不兼容
:::

### 快速添噪

为视频添加噪点,常用于视频超分时

### 自定义拆帧参数 (专业选项)

用于替换ffmpeg或vspipe用于解码的参数，自定义参数之间用`||`间隔

## 自定义编码设置

### 指定编码线程数

编码器为CPU时，有几率控制CPU占用率以控制渲染速度。

### 自定义压制参数

此功能为专业选项（注意输入项数必须为**偶数**），

键值之间用`||`分隔

> <Badge text="例"/> CPU h265压制时自定义压制参数：
>
> `-x265-params||ref=4:me=3:subme=4:rd=4:merange=38:rdoq-level=2:rc-lookahead=40:scenecut=40:strong-intra-smoothing=0`

### 时间重映射: 改变视频的速度

::: tip
此功能需购买[专业版DLC](https://store.steampowered.com/app/1718750/SVFI_Professional/)
:::

- 此功能用于制作“慢动作”素材。

- 例如设置输出帧率为120帧，时间重映射设置为60帧，输出效果等同于50%**播放速度慢放**。

- 其他情况依次类推，您可以自己设置输出帧率，**支持小数**。

::: warning
动漫素材请尽可能在**补帧设置**的**视频流畅度优化**中开启[前进消重](/pages/advanced-settings/#视频流畅度优化)。

或者用Premiere等软件降低原视频的帧率来完成重复帧的去除，以避免重映射后卡顿。

原视频帧率一般降低到8或12fps
:::

### 首尾循环

在第一帧放入最后一帧以适配一些首尾相连的循环视频

::: tip 
在一般情况下，结尾因为没有可以补出来的新帧，漏掉（输出帧率/输入帧率）的帧是正常的。但在loop模式下不受影响，因为总有开头帧可以和结尾帧作为补帧对补出剩余的帧
:::

## IO控制

<div align=center>
<img src="/Statics/UserGuide/60.png"  width=600>
</div>

### 手动指定缓冲区内存大小

若运行内存紧张（16G以下），建议**手动指定缓冲区内存的大小**为2-3G避免**爆内存**(out of memory)错误。

### 单一输出区块大小

- 对于补帧和压制任务，每渲染数量为该值的帧，将输出一个不带音频的小片段，以方便您**预览效果**。
- 片段会生成在您设置的输出文件夹中，**并在补帧或压制任务完成后合并为一个文件**。

### 任务完成后保留项目文件夹

补帧完成后**不删除中间生成的chunk视频以及缓存文件夹**。

## 补帧设置

### **安全帧率**

如果视频要上传到相应媒体平台上在线观看，请开启此项。

该选项会在输入为NTSC制式视频时（如`24000/1001`帧率的视频），将输出正确转换为对应的NTSC制式视频（如`60000/1001`），以避免音画不同步。不开启则可能会音画不同步（如输出是`59994/1000`）。

建议保留此项开启


### **半精度模式**

可以降低显存占用, 对于20系, 30系, 40系及以上的NVIDIA显卡有加速效果

::: warning
可能会导致画面精度下降 (使用gmfss模型进行补帧时可能出现颗粒感)
:::

### **反向光流**

该功能可使画面在一定程度上**更加丝滑**。

::: tip 
若使用GMFSS pg 104补帧模型时出现cudnn status error时请关闭反向光流
:::

### **光流尺度**

这是SVFI在使用补帧算法进行光流计算时，使用的光流分辨率放缩尺度。0.5说明将输入画面放缩二分之一倍后进行光流计算，以此来提高某些算法的性能或效果。

- 使用RIFE算法时，当原视频尺寸为1080P时，默认开1.0，4K以及以上开0.5，小于1080P开1.0

- 使用GMFSS算法时，原视频尺寸为1080P时，默认开1.0, 4K及以上开0.5，小于1080P开1.0

::: warning
使用GMFSS算法，原视频尺寸低于等于1080P时，该选项不建议填写低于1.0的数值
:::

### **交错补帧**

- 相当于特殊的切割, 用于减少显存占用, 不会出现画面撕裂, 但会使画面模糊

- 恰当选择此项可以让小显存显卡补超大分辨率（如4G补8K）

### **视频流畅度优化**

::: warning
该系列选项仅用于动漫输入或存在重复帧的真人素材。

一般情况下真实拍摄的素材不建议开启此选项。
:::

| 方法         | 应用场景 | 速度    | 流畅度  | 果冻数量 |
|------------|-------|-------|-------|------|
| 时空线性化      | 通用    | ★★☆      |  ★☆☆  |  ☆☆☆  |
| 固定阈值去重    | 通用    | ★★★      |  ★☆☆  |  ☆☆☆  |
| 去除一拍二     | 动漫    | ★★★   | ★★☆   | ★☆☆  |
| 去除一拍二与一拍三 | 动漫    | ★★★   | ★★☆   | ★☆☆  |
| 一阶差分去重    | 动漫    | ★★☆   | ★★☆   | ★★☆  |
| 时空重采样     | 动漫    | ★★☆   | ★★★   | ★★★  |
| 前进消重      | 动漫    | ☆☆☆   | ★★★   | ★☆☆  |
| 交叉重建      | 动漫    | ★☆☆   | ★★★   | ★☆☆  |
| 平滑差异      | 动漫，一倍修复 | /       | /       | /       |

说明：

- **时空线性化**: 解决补帧时不对称问题引起的卡顿, 补任何视频都有一定的流畅平稳效果（TruMotion）
- **固定阈值去重**: 用于缓解重复帧造成的画面卡顿感，一般通用值为0.2，动漫时使用0.5，1.0或更高
- **去除一拍二**: 识别并将动画中的一拍二画面变成一拍一
- **去除一拍二与一拍三**: 识别并将动画中的一拍三、二画面变成一拍一
- **一阶差分去重**: 和去除一拍二与一拍三类似，但是除重更激进
- **时空重采样**: 如果输入视频帧率在24左右，并且最多只有一拍三，没有更高节拍的画面，则可以完全去除动漫视频素材的卡顿
- **交叉重建**: 和时空重采样类似，总体上效果会更好，输入帧率请一定要在24左右，输出帧率只能是输入帧率的整数倍，且仅供特定模型使用
- **前进消重**: 完全去除动漫视频素材的卡顿，如果您输入的视频帧率在24左右，默认填2表示可以解决一拍三及以下节拍带来的卡顿问题
- **平滑差异**: 当视频出现不规律的重复帧（不确定多少帧一重复），或者处理录屏掉帧视频时，可以使用该功能进行一次平滑。**注意这不会改变输入视频的帧率**


::: tip
**前进消重**，**交叉重建**，**时空重采样**，仅支持任意时刻补帧的算法与模型  
若不清楚一拍二，一拍三的区别，请查看[一拍N介绍](https://www.zhihu.com/question/27781021)
:::

:::warning
由于现阶段AI补帧在动漫补帧方面能力有限，选择去重将加大帧间运动幅度，导致补帧时产生画面扭曲，请自行对于每个输入视频控制变量多次试验选择最好的除重模式。

建议您谨慎选择去重模式，如果对动漫全片进行补帧，建议开时空线性化或者不开启去除重复帧。
:::

**开启视频流畅度优化后(前进消重)补帧效果如下**

<div align=center>
<img src="/Statics/UserGuide/65.gif"  width=600>
</div>

<div align=center>
<img src="/Statics/UserGuide/66.gif"  width=600>
</div>

### **负载显卡**

指定使用哪张显卡进行补帧

## **补帧算法**介绍

SVFI集成若干补帧算法，如RIFE、GMFSS、UMSS等

这些算法在不同素材上性能不同，分别用于真人及动画素材的算法及模型见[预设](/pages/svfi-presets/)及下方介绍

## **补帧模型**介绍

::: tip
带有`ncnn`字样的模型使用[ncnn](https://github.com/Tencent/ncnn)作为前向推理框架，其兼容N卡及A卡，不带有此字样的模型无法用于A卡及核显。
:::

- RIFE：高速，热门的新时代补帧算法 (以下为模型介绍)

 >2.3: 经典，热门模型，速度快，效果好。
 >
 >4.6: 速度比2.3快两倍以上, 效果更好, 推荐使用。
 >
 >4.8: 动漫素材优化模型, 补动漫效果更好, 速度和4.6一样快
 >
 >4.9: 动漫与实拍素材优化模型, 补实拍效果更好, 速度同上
 >
 >rpr_v7_2.3_ultra: 组合模型，更能适应复杂画面。
 >
 >rpr_v7_2.3_ultra#2: 组合模型，更能适应复杂画面。

- ncnn-rife：支持各种显卡版本的RIFE，兼容性好，速度快，质量比RIFE略差。

- ncnn_dain：传统老算法，动漫实拍均可用，支持任意时刻，速度很慢，流畅度很高。

- GMFSS：速度慢，质量超高 (以下为模型介绍)(带trt标记的模型为加速模型)

>pg104: 第四代gmfss动漫模型, 目前最强大的动漫补帧模型
>
>union_v: 第三代GMFSS模型,结构稳定,画面流畅
>
>basic: 第一代gmfss模型,速度非常慢，效果可能比up稳定

::: warning
该系列模型消耗显存资源较多，不建议使用该系列模型进行4K及以上分辨率的补帧。

如果需要超分补帧同时进行，请勾选**输出分辨率设置**的**先补帧后超分**，或手动拆分为两个步骤执行。

若遇到瑕疵加剧的情况，则建议使用默认设置：先超分再补帧
:::

## 其他补帧选项介绍

### **TTA模式**

::: tip
此功能需购买[专业版DLC](https://store.steampowered.com/app/1718750/SVFI_Professional/)
:::

>开启该功能可以**减少画面果冻，减小字幕抖动，减弱物体消失的问题**。使得画面更加**平滑舒适**
>
>**需要额外消耗补帧时间，同时部分补帧模型不支持此功能**。
>
>后面的数字填的越大越慢，果冻越少，一般填1或者2就行了
>
>中向，适合rife2.3

### **双向光流**

>速度降低一半左右，RIFE 2.x系列补帧模型效果可能会有些许提升
>
>gmfss/umss模型开启双向光流能加速5%, 效果不会变化, 但会增加显存占用

### **动态光流尺度**

::: tip
此功能需购买[专业版DLC](https://store.steampowered.com/app/1718750/SVFI_Professional/)
:::

>在补帧过程中动态选择光流尺度，可减少物体消失问题以及减少果冻 (仅适用于RIFE 2.3与RIFE 4.6)

## 自定义预设栏

::: tip
此功能需购买[专业版DLC](https://store.steampowered.com/app/1718750/SVFI_Professional/)
:::

### 基于当前设置新建预设

在给预设取个名字之后点击即可新建预设

### 移除当前预设

删除当前选中的预设

### 应用指定预设

加载之前保存的预设，自动载入参数

## 工具箱

### 结束残留进程

将结束所有任务，包括多开SVFI的任务。

::: tip
如果需要避免结束多开SVFI的情况，需要手动在任务管理器中，结束当前SVFI进程下的所有SVFI CLI进程。在开启多线程时，**始终建议不要轻易点击**结束任务按钮。
:::

### 视频转换 GIF 动图

生成高质量的 GIF 动图

使用范例:
 > 输入视频路径: `E:\VIDEO\video.mp4`
 >
 > 输出动图(gif)路径: `E:\GIF\video_gif_output.gif`
 >
 > 输出帧率: 30 fps (一般要小于等于原视频的帧率, 不建议高于30)

### 合并已有区块

将散落的chunk片段合并。
:::tip
若任务在最后的合并期间失败，可以在调整设置后直接选中任务并点击此按钮完成合并操作。
:::

### 音视频合并

- 填入视频的完整路径(<Badge text="例"/> `D:\01\myvideo.mp4`)

- 填入视频的音频路径(<Badge text="例"/> `D:\01\myvideo.aac`), 或者使用一个视频来输入音频(<Badge text="例"/> `D:\01\otherVideo.mp4`)

- 输出视频路径(<Badge text="例"/> `D:\01\output.mp4`)

- 二次压制音频: 将音频压制为aac格式, 640kbps

### 导出当前设置到文本文件

导出设置信息为ini文件, 可分享给其他用户方便贡献自己的设置。使用方法直接拖入软件内, 会提示成功应用预设。
详细用法见[使用技巧](/pages/useful-tips/)。

:::tip
若软件视频输出不符合预期，如存在偏色，效果不好等情况，可点击此按钮并将设置文件发送给开发者以定位问题。
:::

### 调试模式

在任务进行时输出调试信息。

::: warning
有些情况下该模式会往画面中添加调试内容并让任务处理速度变慢。

因此在正式输出时请关闭该选项
:::

# 左侧标题栏功能

<div align=center>
<img src="/Statics/UserGuide/68.png"  width=600>
</div>

## 设置

主设置页

## 预览

输出预览页
::: tip
在使用播放器界面进行预览时，若输入为HDR视频，则预览画面发灰是正常现象。
:::

## 状态

查看程序输出信息

## 用户页

查看已获得的软件成就与可扩展或已拥有的DLC

## 偏好

### 休息间隔

每隔 X 小时让设备休息一下（短暂暂停任务）

### 缓存文件夹

将任务文件夹指定到其他位置。最终输出视频将仍在目标文件夹

### 任务运行后

可以选择一些补帧完成后的自动操作

### 强制退出

默认开启, 软件出现错误时强制结束软件进程, 避免出现残留进程

### 真实编码模式

编码时, 不进行重复帧去重等操作

### 开启预览

补帧时开启预览窗口

### 自动纠错

自动修改设置来防止任务报错

### 完成后清空任务列表

列表中所有任务完成后清空输入队列

### 静音模式

不弹出窗口与通知

### 背景图片

可选择图片开启自定义背景

### 背景模糊

值越大背景越模糊

### 背景透明度

值越大背景亮度越高

### 应用主题

更改应用程序的主题

### 主题颜色

更改应用程序的主题颜色

### 语言

为用户界面设置首选语言

### 仅使用 CPU

仅使用CPU进行AI推理。只适用于无显卡设备。

### 使用所有 GPU

使用所有可用的GPU进行AI推理加速。

::: warning
如果设备只有一张显卡，请务必关闭此选项。
:::

### TensorRT INT8 量化功能

加速TensorRT模型的运行速度, 但编译TensorRT时会耗费更多时间, 且可能导致模型效果下降, 请谨慎使用该功能。

软件会对模型进行750轮量化，时间相当久，且可能在部分设备上加速不明显。


### 帮助

了解SVFI的新功能和实用技巧 (快捷操作,快捷键等)

### 提供反馈

提供反馈意见, 帮助我们改进SVFI

### 关于

软件版权与日志
