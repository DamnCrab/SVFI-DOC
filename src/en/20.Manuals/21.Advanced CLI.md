---
title: Advanced Settings of Command Line Interface
date: 2022-08-28 22:23:12

---
::: warning Warning
The description on this page belongs to advanced content, please read [Advanced Content Detailed Explanation](/pages/advanced-settings/)
:::
SVFI supports using command line interface

## Environment construction

1. Create a new `steam_appid.txt` in the SVFI installation root directory and fill in the following content

> 1692080

::: tip Tip
Filling out this text file will cause SVFI to start in standalone application mode to avoid interference from the Steam client.

Special operations such as multi-opening of software and migration of software installation locations can be realized.
:::

2. Start the command prompt `cmd` in the root directory of the SVFI installation (if the installation location is not on the system disk, administrator privileges are not required), enter `one_line_shot_args.exe -h` and press Enter, you should be able to see something similar to the following:

```
usage: #### SVFI CLI tool by Jeanna #### [-h] -i INPUT -c CONFIG -t TASK_ID
                                         [--concat-only] [--extract-only]
                                         [--render-only] [-p] [--pipe-in]
                                         [--pipe-out]
                                         [--pipe-iw PIPE_IN_WIDTH]
                                         [--pipe-ih PIPE_IN_HEIGHT]
                                         [--pipe-in-fps PIPE_IN_FPS]
                                         [--pipe-in-pixfmt {rgb24,rgb48be,rgb48le,rgb48}]
                                         [--pipe-rgb]
                                         [--pipe-colormatrix {470bg,170m,2020ncl,709}]

To enhance Long video/image sequence quality

optional arguments:
  -h, --help            show this help message and exit

Basic Settings:
  -i INPUT, --input INPUT
                        Path of input video/image sequence folder
  -c CONFIG, --config CONFIG
                        Path of config
  -t TASK_ID, --task-id TASK_ID
                        13-digit Task id
  --concat-only         Concat Chunk only
  --extract-only        Extract input to frames Only
  --render-only         Render only
  -p, --preview         Preview Settings

Pipe Settings:
  Set the follow parameters when '-mid' is assigned, or you will encounter
  exceptions.Output Y4M at YUV444P10

  --pipe-in             This enables OLS to obtain input data from stdin
  --pipe-out            This enables OLS to pipe output to stdout
  --pipe-iw PIPE_IN_WIDTH
                        Width of input raw RGB, effective when --pipe-in
                        appointed
  --pipe-ih PIPE_IN_HEIGHT
                        Height of input raw RGB, effective when --pipe-in
                        appointed
  --pipe-in-fps PIPE_IN_FPS
                        Input stream FPS, effective when --pipe-in appointed
  --pipe-in-pixfmt {rgb24,rgb48be,rgb48le,rgb48}
                        Pixel format of input raw RGB, effective when --pipe-
                        in appointed
  --pipe-rgb            Pipe RGB Raw data to stdout, effective when --pipe-out
                        appointed
  --pipe-colormatrix {470bg,170m,2020ncl,709}
                        Colormatrix for RGB-YUV Conversion, effective when
                        --pipe-in appointed, --pipe-rgb not appointed


```
## Description of typical usage scenarios

### Open more SVFI

The `one_line_shot_args.exe` (hereinafter referred to as OLS) program supports multiple openings after the above configuration is completed, and is used for multi-process tasks. Please note that this may cause a huge resource occupation.

There are three required parameters that need to be entered:

- `--input`: The folder where the video file or image sequence to be processed is located
- `--config`: The configuration file generated by the SVFI GUI program, generally located in the Configs folder of the installation directory
- `--task-id`: task ID, a non-empty string, used to distinguish different tasks.

### Pipeline input

SVFI supports RGB stream input from other processes. Currently, it supports raw stream input in four pixel formats `rgb24`, `rgb48`, `rgb48le`, `rgb48be`.

`--pipe-in` must be filled in to enable this feature, and additionally specify `--pipe-iw` input image pixel length, `--pipe-ih` width, `--pipe-in-fps` input stream frame Rate (float only), the pixel format of `--pipe-in-pixfmt` input.

### Pipeline output

SVFI supports outputting RGB or Y4M streams of `YUV444P10` to `stdout`.

`--pipe-out` must be filled in to enable this feature,

- If you need to output `YUV444P10`, please specify `--pipe-colormatrix` for SVFI to convert RGB to YUV stream
- If you want to output the `RGB` stream, please specify `--pipe-rgb`, the specific output pixel format is controlled by the options of the configuration file, generally speaking, `rgb48` is output when high-precision workflow is enabled, and `rgb48` is output for non-high-precision workflow output `rgb24`

### Command line example

#### Use `ffmpeg` for high-precision frame splitting and input `SVFI` for processing, use `Y4M` input `ffmpeg` for compression

```bash
ffmpeg -loglevel error -vsync passthrough -hwaccel auto -i test/test.mp4 -map 0:v:0 -sws_flags +bicubic+full_chroma_int+accurate_rnd -vf copy,format=yuv444p10le,format=rgb48be,format=rgb24,minterpolate=fps=24.000:mi_mode=dup -f image2pipe -pix_fmt rgb24 -vcodec rawvideo - |  one_line_shot_args.exe  -i - -c Configs/SVFI_Config_pipe_test.ini -t pipe_2 --pipe-in --pipe-iw 960 --pipe-ih 540  --pipe-in-fps 24 --pipe-out |  ffmpeg.exe -loglevel error -hide_banner -y -vsync cfr -i - -preset:v slow -c:v hevc_nvenc -pix_fmt yuv420p -crf 16 test/output.mp4 -y
```
#### Use `ffmpeg` for high-precision frame splitting and input the `SVFI` pipeline with a length of 2 for processing, output `Y4M` and use `ffmpeg` for compression

The first OLS process is used for super resolution, and the second OLS process is used for supplementary frame

```bash
ffmpeg -loglevel error -vsync passthrough -hwaccel auto -i test/test.mp4 -map 0:v:0 -sws_flags +bicubic+full_chroma_int+accurate_rnd -vf copy,format=yuv444p10le,format=rgb48be,format=rgb24,minterpolate=fps=24.000:mi_mode=dup -f image2pipe -pix_fmt rgb48be -vcodec rawvideo - | one_line_shot_args.exe  -i - -c Configs/SVFI_Config_pipe_1.ini -t pipe_1 --pipe-in --pipe-iw 960 --pipe-ih 540 --pipe-in-fps 24 --pipe-out --pipe-rgb --pipe-in-pixfmt rgb48be | one_line_shot_args.exe -i - -c Configs/SVFI_Config_pipe_2.ini -t pipe_2 --pipe-in --pipe-iw 960 --pipe-ih 540  --pipe-in-fps 24 --pipe-in-pixfmt rgb48 --pipe-out |  ffmpeg.exe -loglevel error -hide_banner -y -vsync cfr -i - -preset:v slow -c:v hevc_nvenc -pix_fmt yuv420p -crf 16 test/output.mp4 -y
```
#### Use `Vapoursynth` to preprocess the input and then use `ffmpeg` to perform high-precision frame splitting and `SVFI` pipeline processing

The `Vapoursynth` script `input.vpy` used:

```python
import vapoursynth as vs
from vapoursynth import core
video = core.lsmas.LWLibavSource(r'test.mp4')  # 960x540, 24fps

# DO SOMETHING

video.set_output()  # output yuv
```
Command Line:

```bash
vspipe input.vpy --y4m - | ffmpeg -loglevel error -vsync passthrough -hwaccel auto -i - -map 0:v:0 -sws_flags +bicubic+full_chroma_int+accurate_rnd -vf copy,format=yuv444p10le,format=rgb48be,format=rgb24,minterpolate=fps=24.000:mi_mode=dup -f image2pipe -pix_fmt rgb24 -vcodec rawvideo - |  one_line_shot_args.exe  -i - -c Configs/SVFI_Config_pipe_test.ini -t pipe_2 --pipe-in --pipe-iw 960 --pipe-ih 540  --pipe-in-fps 24 --pipe-out |  ffmpeg.exe -loglevel error -hide_banner -y -vsync cfr -i - -preset:v slow -c:v hevc_nvenc -pix_fmt yuv420p -crf 16 test/output.mp4 -y
```

::: tip Tip
After using SVFI to configure task parameters and start the task, use `Config.ini` generated under the `Configs` folder to perform command line tasks
:::